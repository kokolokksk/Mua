<template>
  <div class="app">
    <div class="menu" :class="menu_state&&'menu_hide'">
      <div class="menu-container">
         <div class="menu-photo">
           <img :src="faceImg" class="photo"/>
           <p> {{nickname}}</p>
         </div>
         <div class="menu-list">
            <div class="menu-item-container" v-for="item in 3" :key="item">
                <div class="menu-item-icon" @click="menuClick(item)">
                <svg v-if="item===1" t="1645598412986" class="icon" viewBox="0 0 1078 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8049" width="25" height="25"><path d="M538.947368 656.976842a147.402105 147.402105 0 0 1-147.240421-147.294316A147.348211 147.348211 0 0 1 538.947368 362.549895a147.348211 147.348211 0 0 1 147.240421 147.132631A147.402105 147.402105 0 0 1 538.947368 656.976842m0-345.465263a198.440421 198.440421 0 0 0-198.224842 198.224842A198.440421 198.440421 0 0 0 538.947368 707.907368a198.440421 198.440421 0 0 0 198.224843-198.224842A198.440421 198.440421 0 0 0 538.947368 311.511579m483.759158 269.473684c-2.694737 15.413895-21.557895 36.971789-42.199579 41.714526l-17.084631 4.149895a162.492632 162.492632 0 0 0-93.776842 75.237053 165.618526 165.618526 0 0 0-16.222316 123.79621l3.449263 11.210106c6.090105 22.258526-0.754526 45.756632-17.084632 60.631579-1.616842 1.293474-16.922947 13.904842-56.751157 36.971789-39.127579 22.635789-57.559579 30.019368-60.631579 31.151158a43.277474 43.277474 0 0 1-15.629474 2.533053c-16.437895 0-34.492632-7.006316-43.924211-17.300211l-12.018526-12.719158c-29.696-28.348632-69.685895-42.522947-110.160842-42.522947-42.361263 0-85.315368 15.521684-117.652211 46.672842l-7.922526 8.677053c-13.904842 15.198316-44.193684 20.372211-59.607579 14.713263-0.215579 0-18.432-6.790737-60.254316-31.097263-37.510737-21.719579-53.894737-34.384842-56.158315-36.163369-16.168421-13.850947-24.360421-41.229474-18.108632-61.224421l5.497263-18.701474a165.241263 165.241263 0 0 0-117.867789-193.42821l-11.425684-2.479158c-19.671579-4.527158-39.235368-25.276632-43.331369-47.696842-1.077895-5.012211-2.802526-31.258947-2.802526-65.536 0-50.122105 3.449263-68.769684 3.772631-70.332632 3.179789-18.054737 23.174737-38.426947 42.253474-42.792421l19.671579-4.688842a161.037474 161.037474 0 0 0 91.405474-74.590316 165.025684 165.025684 0 0 0 16.330105-123.957894l-3.772632-11.964632c-6.036211-19.402105 1.724632-46.672842 16.707369-59.284211 2.802526-2.317474 18.755368-15.090526 57.451789-37.564631 42.199579-24.468211 59.769263-30.72 60.038737-30.82779 16.168421-6.090105 44.948211-1.940211 60.146526 14.551579l13.312 14.174316c57.775158 54.864842 164.864 53.032421 226.034527-5.01221l8.461473-9.377685c15.306105-16.491789 45.594947-19.671579 59.176421-14.874947 2.048 0.808421 20.48 7.922526 60.847158 31.258947 37.079579 21.557895 54.433684 34.708211 58.799158 38.750316 12.449684 10.617263 21.773474 37.834105 15.36 58.47579l-5.658947 19.078737a164.378947 164.378947 0 0 0 18.32421 116.682105c21.180632 36.864 54.810947 63.164632 99.004632 76.422737l11.802947 2.586947c19.671579 4.581053 39.235368 25.330526 43.385264 47.319579 0.700632 4.096 2.910316 27.109053 2.96421 65.751579 0 44.840421-2.856421 65.913263-4.149895 71.57221m50.714948-148.318315h0.053894c-7.060211-39.882105-42.145684-76.853895-81.758315-86.016l-10.24-2.15579a114.256842 114.256842 0 0 1-67.637895-52.601263 112.801684 112.801684 0 0 1-13.150316-78.524632l5.12-16.869052c11.856842-38.157474-1.940211-87.417263-29.803789-110.969263-6.844632-6.790737-28.725895-22.689684-67.69179-45.325474-41.876211-24.252632-62.895158-32.821895-68.769684-34.977684-32.444632-11.641263-84.075789-4.257684-114.256842 28.294737l-7.27579 8.192c-40.043789 37.834105-116.574316 39.720421-153.49221 4.850526L452.500211 33.468632C429.756632 8.892632 395.048421 0 370.202947 0c-11.695158 0-22.312421 1.832421-32.444631 5.497263-3.610947 1.293474-23.983158 8.946526-68.446316 34.762105-40.097684 23.174737-58.421895 37.349053-64.673684 42.576843-30.558316 25.977263-44.570947 74.805895-32.606316 113.55621l3.395368 10.617263c7.383579 28.833684 3.233684 58.960842-11.641263 84.938105a109.514105 109.514105 0 0 1-60.685473 50.661053l-17.51579 4.096C46.888421 355.705263 11.317895 392.407579 4.850526 429.002105 2.694737 438.595368 0 465.434947 0 509.574737c0 18.324211 0.431158 58.906947 4.311579 76.746105H4.257684c7.006316 40.043789 42.037895 77.069474 81.812211 86.231579l10.24 2.15579c57.559579 16.168421 92.860632 74.805895 80.842105 131.503157l-4.958316 16.384c-12.180211 39.289263 2.048 87.578947 34.384842 115.334737 6.144 4.850526 24.468211 18.647579 63.056842 41.06779 46.349474 26.785684 66.721684 34.223158 68.608 34.869894 9.539368 3.449263 20.156632 5.281684 31.528421 5.281685 24.037053 0 60.092632-8.784842 82.997895-33.576421l6.844632-7.653053c42.307368-40.421053 115.119158-41.660632 155.001263-3.664842l10.886737 11.587368c19.294316 20.911158 50.014316 32.606316 82.189473 33.522527 10.994526 0 21.827368-1.886316 32.498527-5.766737 7.168-2.694737 28.025263-11.371789 68.392421-34.708211 41.606737-24.198737 59.499789-38.426947 64.673684-42.792421a111.993263 111.993263 0 0 0 32.606316-113.286737l-3.395369-10.778947a114.149053 114.149053 0 0 1 11.425685-84.776421c14.282105-24.899368 37.187368-43.223579 62.949052-51.30779l15.306106-3.664842c38.858105-8.946526 74.374737-45.271579 80.141473-80.087579 3.395368-11.749053 5.605053-44.301474 5.605053-82.944-0.053895-18.216421-0.538947-58.475789-4.473263-76.638315" p-id="8050" fill="#515151"></path></svg>
                <svg v-if="item===2" t="1645608041100" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11202" width="25" height="25"><path d="M512 154.304a356.672 356.672 0 1 0 0 713.28A356.672 356.672 0 0 0 512 154.304zM76.16 510.912a435.904 435.904 0 1 1 871.744 0.064 435.904 435.904 0 0 1-871.808 0z m593.408 68.48c22.528-14.848 36.16-40.704 36.16-68.48 0-27.776-13.632-53.568-36.16-68.416l-208.256-136.96c-51.648-33.92-118.848 4.864-118.848 68.48v273.856c0 63.616 67.2 102.336 118.848 68.416l208.192-136.96v0.064z m-41.344-68.48l-208.256 136.96V374.016l208.256 136.96z" fill="#1ba784" fill-opacity=".85" opacity=".85" p-id="11203"></path></svg>
                <!-- <svg v-if="item===3" t="1646573894452" class="icon" viewBox="0 0 1092 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1463" width="25" height="25"><path d="M1010.551467 424.925867c0 86.016-65.365333 155.886933-147.0464 166.638933H819.882667c-81.681067-10.752-147.0464-80.622933-147.0464-166.638933H580.266667c0 123.630933 92.603733 231.1168 212.411733 252.6208V785.066667h87.176533v-107.52C999.662933 656.042667 1092.266667 553.915733 1092.266667 424.96h-81.7152z m-76.253867-231.150934C934.2976 140.014933 890.743467 102.4 841.728 102.4a91.204267 91.204267 0 0 0-92.603733 91.374933v91.374934h190.634666V193.774933h-5.461333z m-190.634667 231.150934c0 53.76 43.588267 91.374933 92.603734 91.374933a91.204267 91.204267 0 0 0 92.603733-91.374933V333.550933h-185.207467v91.374934zM464.213333 150.698667L324.266667 10.24l-6.826667-6.826667L314.026667 0l-3.413334 3.413333-6.826666 6.8608-20.48 20.548267-3.413334 3.413333 3.413334 6.8608 13.653333 13.687467 75.093333 75.3664H218.453333c-122.88 6.826667-218.453333 109.568-218.453333 229.444267v10.274133h51.2v-10.24c0-92.501333 75.093333-171.281067 167.253333-178.107733h153.6L296.96 256.853333l-10.24 10.274134-3.413333 6.826666-3.413334 3.447467 3.413334 3.413333 27.306666 27.409067 3.413334 3.413333 3.413333-3.413333 30.72-30.8224 116.053333-116.4288 3.413334-3.413333-3.413334-6.8608zM58.026667 534.254933v130.1504h64.853333v-65.058133h129.706667v359.594667H187.733333V1024h194.56v-65.058133H317.44V599.3472h129.706667v65.058133H512v-130.1504H58.026667z" p-id="1464" fill="#1296db"></path></svg> -->
                <svg v-if="item===3" t="1645598482435" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9082" width="25" height="25"><path d="M509.953388 57.464783c-250.633271 0-454.535217 203.90297-454.535217 454.535217 0 250.662947 203.901946 454.535217 454.535217 454.535217 250.638387 0 454.535217-203.895807 454.535217-454.535217C964.488605 261.368776 760.590751 57.464783 509.953388 57.464783L509.953388 57.464783zM508.23935 923.475516c-227.256864 0-412.150898-184.888917-412.150898-412.150898 0-227.256864 184.895057-412.150898 412.150898-412.150898 227.263004 0 412.150898 184.895057 412.150898 412.150898C920.391271 738.586598 735.502353 923.475516 508.23935 923.475516L508.23935 923.475516zM509.953388 913.060305" p-id="9083" fill="#515151"></path><path d="M510.004553 432.933223c-14.559601 0-26.373671 11.812023-26.373671 26.372647l0 303.290561c0 14.583137 11.81407 26.372647 26.373671 26.372647s26.372647-11.789511 26.372647-26.372647L536.3772 459.304847C536.376177 444.745247 524.564154 432.933223 510.004553 432.933223L510.004553 432.933223zM510.004553 432.933223" p-id="9084" fill="#515151"></path><path d="M457.258235 301.068963c0 13.804401 5.686513 27.53103 15.446807 37.292348 9.766434 9.766434 23.486924 15.452947 37.299511 15.452947 13.81054 0 27.53103-5.686513 37.299511-15.452947 9.766434-9.761318 15.446807-23.48897 15.446807-37.292348 0-13.811564-5.680373-27.53717-15.446807-37.299511-9.767458-9.766434-23.48897-15.452947-37.299511-15.452947-13.811564 0-27.533077 5.686513-37.299511 15.452947C462.944747 273.531793 457.258235 287.257399 457.258235 301.068963L457.258235 301.068963zM457.258235 301.068963" p-id="9085" fill="#515151"></path></svg>
                </div>
                <span>{{menu_list[item-1]}}</span>
            </div>
         </div>
         <div class="menu_swtich"  @click="menu_state=menu_state?0:1" >
            <svg v-if="menu_state===1" t="1645597102996" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5859" width="25" height="25"><path d="M515.2 67.2c-246.4 0-448 201.6-448 448s201.6 448 448 448 448-201.6 448-448-201.6-448-448-448z m160 604.8h-320c-19.2 0-32-12.8-32-32s12.8-32 32-32h320c19.2 0 32 12.8 32 32s-16 32-32 32z m0-124.8h-320c-19.2 0-32-12.8-32-32s12.8-32 32-32h320c19.2 0 32 12.8 32 32s-16 32-32 32z m0-131.2h-320c-19.2 0-32-12.8-32-32s12.8-32 32-32h320c19.2 0 32 12.8 32 32s-16 32-32 32z" fill="#8a8a8a" p-id="5860"></path></svg>
            <svg  v-if="menu_state===0" t="1645601974397" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10285" width="25" height="25"><path d="M800 480H268.8l233.6-233.6c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0l-284.8 288c-12.8 12.8-12.8 32 0 44.8h3.2l284.8 288c6.4 6.4 16 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6 12.8-12.8 12.8-32 0-44.8L272 544H800c19.2 0 32-12.8 32-32s-16-32-32-32z" p-id="10286" fill="#707070"></path></svg>
         </div>
      </div>
    </div>
    <div class="page">
      <router-view/>
    </div>
  </div>
</template>
<script>
let aa, roomid, uid
export default {
  data () {
    return {
      menu_state: 1,
      menu_list:['设置', '启动弹幕窗口', '关于'],
      faceImg: 'https://avatars.githubusercontent.com/u/12725100?v=4',
      nickname:''
    }
  },
  mounted () {
    aa = setInterval(() => {
      console.info(Window.roomid)
      if (Window.roomid !== null && Window.roomid !== undefined) {
        roomid = Window.roomid
        clearInterval(aa)
        this.load(roomid)
      }
    }, 1000)
  },
  methods: {
    load (num) {
      clearInterval(aa)
      let _self = this
      let a = this.$http
      a.get('http://api.live.bilibili.com/room/v1/Room/room_init?id=' + num)
        .then(function (response) {
          // handle success
          console.log(response)
          uid = response.data.data.uid
          a.defaults.withCredentials = true
          document.cookie = 'SESSDATA=xxxx'
          a({
            url:'http://api.live.bilibili.com/live_user/v1/Master/info?uid=' + uid,
            Headers:{
              'Referer':'https://www.bilibili.com/'
            }
          })
            .then(function (response) {
              console.log(response)
              _self.faceImg = response.data.data.info.face
              _self.nickname = response.data.data.info.uname
            })
            .catch(function (error) {
              console.log(error)
            })
        })
        .catch(function (error) {
          // handle error
          console.log(error)
        })
    },
    menuClick (item) {
      console.info(item)
      switch (item) {
        case 1:
          break
        case 2:
          console.info('come in createDmWindow windows')
          this.$electron.ipcRenderer.send('createDmWindow')
          this.$electron.ipcRenderer.send('createChatWindow')
          break
        case 3:
          break
        default:
          break
      }
    }
  }
}
</script>
<style scoped>
.app{
   display: flex; 
}
.page{
  display: flex;
  flex:1;
  height: 100vh;
  background-color: rgb(241, 241, 241);
  overflow-y: auto;
}
.menu-container{
  flex-direction: column;
  display: flex;
  justify-content:space-between; 
  height: 100vh;
}
.menu-photo{
  justify-content: center;
  align-content: center;
  text-align: center;
  display: flex;
  flex-wrap: wrap;
  height: 30vh;
}
.menu-list{
  height: 50vh;
  transition: all 0.1s ease-in-out;
}
.menu_swtich{ 
  align-self: flex-end;
  height: 19vh; 
  width: 13vw;
}
.photo{
  width: 25px;
  height: 25px;
  padding-bottom: 1vh;
  transition: all 0.1s ease-in-out;
}
.menu-item-container{
  justify-content: center;
  align-items: center;
  display: flex;
  height: 8vh;
}
.menu-item-container:hover{
  background-color: rgb(206, 206, 206);
}
.menu-item-icon{
  display: flex;
   width: 10vw;
   justify-content: center;
}


.menu-photo img{
  width: 20vw;
  height: 20vw;
}
.menu-photo p{
  width: 100%;
   
}
.menu {
  width: 30vw;
  height: 100vh;
  transition: all 0.5s ease-in-out;
  background-color: rgb(255, 255, 255);
}

.menu_hide .menu-item-container span{
  display: none;
}

.menu_hide .menu-photo{
  height: 15vh;
}
 
.menu_hide .menu_swtich{
  width: 10vw;
  bottom: 10vh;
} 
.menu_hide .menu-photo img{
  width: 12vw;
  height: 12vw;
  top: 5%;
  position: fixed;
}
.menu_hide .menu-photo p{
  display: none;
  transition: all 0.1s ease-in-out;
}
.menu_hide{
  width: 14vw;
  height: 100vh;
  transition: all 0.1s ease-in-out;
}
::-webkit-scrollbar {
  display: none;
}
</style>